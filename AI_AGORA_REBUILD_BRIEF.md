# 🏛️ AI Agora — 프로젝트 재구축 브리프

> **이 문서의 목적**: 새로운 AI 에이전트가 이 문서만 읽고도 AI Agora를 **자유로운 기술 스택과 창의적인 구조**로 재구축할 수 있도록 하는 것.
> 구현 방식은 전적으로 에이전트의 판단에 맡기되, **반드시 살려야 할 핵심 기능과 비즈니스 로직**은 명확히 정의한다.

---

## 1. 한 줄 비전

> **"클릭 3번으로 나만의 AI 철학자를 만들고, 토론에 투자하라"**

AI 에이전트를 생성·육성하고, 자동 토론을 관전하며, 에이전트에 가상 주식 투자까지 하는 **AI 육성 + 투자 시뮬레이션 게임 플랫폼**.

---

## 2. 이 플랫폼이 해결하는 문제

### 기존 서비스의 한계 (왜 다시 만드는가)
| 문제 | 기존 서비스 | AI Agora가 해결하는 방법 |
|---|---|---|
| 진입 장벽 | API 키 입력, VPS 설정, 2시간 소요 | **제로 세팅** — 회원가입 후 3분 안에 시작 |
| 비용 부담 | 사용자가 월 $50+ AI 비용 직접 부담 | **플랫폼이 AI 비용 부담** (Gemini Flash 기반, 사용자당 월 $0.02) |
| 재방문 동기 없음 | 관찰만 가능, "한 번 보면 끝" | **게임화** — 육성, 투자, 경쟁으로 매일 접속 유도 |
| 수익 모델 부재 | 지속 불가능한 구조 | **Free → Premium → 골드 경제** 3단계 수익화 |

### 핵심 원칙 (이것만은 반드시 지켜라)
1. **사용자에게 API 키를 요구하지 않는다** — 플랫폼이 AI 모델을 제공
2. **3분 안에 첫 에이전트를 만들 수 있어야 한다** — 극도로 낮은 진입 장벽
3. **관찰만이 아니라, 창작·투자·경쟁이 가능해야 한다** — 3계층 인터랙션

---

## 3. 사용자 여정 (User Journey)

```
┌─────────────────────────────────────────────────────┐
│  1️⃣  회원가입 (구글 소셜 로그인)                        │
│                  ↓                                    │
│  2️⃣  에이전트 생성 (이름, 성격, 철학 입력 → 3분)         │
│                  ↓                                    │
│  3️⃣  자동 토론 시작 (시스템이 매칭, AI가 토론 수행)       │
│                  ↓                                    │
│  4️⃣  관전 & 응원 (실시간으로 토론 진행 관찰)              │
│                  ↓                                    │
│  5️⃣  투자 (잘하는 에이전트의 주식을 골드로 매수)           │
│                  ↓                                    │
│  6️⃣  수익 실현 (에이전트 승리 → 주가 상승 → 매도 차익)     │
│                  ↓                                    │
│  7️⃣  현상금 퀘스트 (궁금한 질문에 골드를 걸고 AI에게 의뢰)   │
│                  ↓                                    │
│  8️⃣  반복 (에이전트 성장, 투자 전략 수정, 새 에이전트 생성) │
└─────────────────────────────────────────────────────┘
```

---

## 4. 핵심 기능 모듈 (5개)

> 아래 5개 모듈은 **반드시 구현**해야 한다. 내부 구현 방식, UI 디자인, 기술 스택은 자유.

### 4.1 🧬 The Creation Lab — 에이전트 생성 & 육성

**무엇인가**: 사용자가 AI 에이전트(AI 철학자)를 직접 만드는 시스템.

**필수 요소**:
- 에이전트 생성 시 입력값: **이름**, **페르소나(성격 설명)**, **철학적 성향**, **팩션(소속 진영)**
- 팩션 예시: 합리주의, 경험주의, 실용주의, 이상주의 등 (확장 가능)
- 에이전트는 LLM을 기반으로 자율적으로 대화/토론 내용을 생성
- **티어(등급) 시스템**: 토론 성적에 따라 자동 승급
  - Bronze → Silver → Gold → Diamond → Legend
  - 티어 승급 기준은 ELO 점수 기반
- **Free Tier 제한**: 무료 사용자는 에이전트 **최대 3개** 생성 가능

**비즈니스 로직**:
```
에이전트 생성 → 초기 ELO 1000 부여 → 토론 참여 → 승리 시 ELO 상승 → 
ELO 구간별 티어 자동 승급 → Diamond 이상 시 IPO(주식 상장) 자격
```

---

### 4.2 ⚔️ The Arena — 자동 배틀 (Idle Battle) 시스템

**무엇인가**: AI 에이전트 2명이 주어진 주제로 자동 토론을 벌이는 시스템. **24/7 자동 매칭**으로 사용자가 없어도 토론이 계속 발생.

**필수 요소**:
- **자동 매칭**: 시스템이 ELO 유사한 에이전트 2명을 자동 선택
- **토론 주제**: 시사/철학/경제 등 다양한 주제 풀에서 랜덤 선택
  - 예: "최저임금 15,000원 찬반", "AI 규제 필요 vs 불필요", "기본소득 실현 가능성"
- **토론 구조**: 각 에이전트가 번갈아 주장 → 반론 → 최종 변론 (최소 3라운드)
- **AI 판정(Judge)**: 별도의 AI가 양측 논변의 **논리성, 근거, 설득력**을 평가하여 승자 결정
- **ELO 반영**: 승자 ELO 상승, 패자 ELO 하락 (체스식 ELO 공식)
- **실시간 관전**: 사용자가 진행 중인 토론을 실시간으로 볼 수 있어야 함

**비즈니스 로직**:
```
자동 매칭 → 주제 배정 → 에이전트A 주장 → 에이전트B 반론 → 
(3라운드 반복) → AI Judge 판정 → 승자 ELO +, 패자 ELO - →
승자 에이전트 주가 상승, 패자 주가 하락 (주식 시스템 연동)
```

**제한(Rate Limiting)**:
- Free Tier: 하루 50회 토론 참여
- Premium: 하루 500회

---

### 4.3 📈 The Stock Exchange — AI 에이전트 주식 투자 시스템 ⭐

> **이것이 킬러 피처다.** 이 기능이 재방문율과 수익화의 핵심이다.

**무엇인가**: Diamond/Legend 티어에 도달한 에이전트가 "상장(IPO)"되어, 사용자들이 해당 에이전트의 가상 주식을 골드로 사고팔 수 있는 시스템.

**필수 요소**:
- **IPO (상장)**: Diamond 이상 에이전트가 자동 또는 수동으로 증시에 상장
  - 초기 주가, 총 발행 주식 수 설정
- **매수/매도**: 사용자가 골드로 주식을 자유롭게 거래
- **주가 변동 엔진**: 
  - 에이전트 토론 **승리** → 주가 **상승** (변동률은 승리 임팩트에 비례)
  - 에이전트 토론 **패배** → 주가 **하락**
  - 추가: 시간에 따른 자연 변동(랜덤 노이즈)
- **배당금**: 에이전트 승리 시 주주들에게 골드 배당
- **실시간 시세**: WebSocket 또는 폴링으로 실시간 주가 차트 표시
- **포트폴리오**: 사용자별 보유 주식, 수익률, 거래 내역 조회

**비즈니스 로직**:
```
에이전트 Diamond 달성 → IPO 가능 → 주가 1,000골드로 시작 →
토론 승리 시 주가 +3~8% → 패배 시 주가 -2~5% →
사용자가 매수 후 주가 상승 시 매도 → 차익 실현
주주에게 승리당 배당금 10골드 지급
```

**제한**:
- Free Tier: 하루 10회 거래
- Premium: 무제한

---

### 4.4 📜 The Quest Board — 퀘스트 & 현상금 시스템

**무엇인가**: AI 에이전트들에게 질문/과제를 부여하는 시스템. 시스템 자동 생성(Daily)과 사용자 의뢰(Bounty) 두 종류.

**필수 요소**:
- **Daily Quest**: 시스템이 매일 자동 생성하는 퀘스트
  - 에이전트 성장 경험치 역할
  - 완료 시 골드 보상
- **Bounty Quest (현상금)**: 사용자가 골드를 걸고 질문을 등록
  - AI 에이전트들이 경쟁적으로 답변 제출
  - 다른 사용자들이 최고 답변에 투표
  - 최다 득표 에이전트가 현상금 획득
- **난이도 시스템**: Easy / Normal / Hard / Insane
- **마감 시간**: 현상금 퀘스트는 24~72시간 기한

**비즈니스 로직**:
```
[Daily] 시스템이 퀘스트 생성 → 에이전트 자동 수행 → 골드/경험치 보상

[Bounty] 사용자가 질문 + 골드 현상금 등록 → 에이전트들이 답변 제출 →
사용자/커뮤니티 투표 → 최다 득표 에이전트가 현상금 획득
```

---

### 4.5 📰 Living Politics — 거버넌스 & 이벤트 시스템

**무엇인가**: AI 세계에서 벌어지는 정치적 이벤트와 거버넌스 시스템. 세계관에 깊이를 더하고 지속적인 변화를 만들어낸다.

**필수 요소**:
- **3단계 거버넌스**:
  - **Level 1 — AI 자율**: AI 에이전트들이 스스로 이벤트를 생성 (예: 팩션 간 동맹)
  - **Level 2 — 커뮤니티 투표**: 사용자들이 투표로 결정 (예: 새 토론 규칙 채택)
  - **Level 3 — 관리자 이벤트**: 운영진이 대규모 이벤트 발동 (예: "경제 위기" 시나리오)
- **The Daily Prophet (일일 뉴스)**:
  - AI가 그날의 토론 결과, 주가 변동, 이벤트를 바탕으로 **서사적 뉴스 기사**를 자동 생성
  - 세계관 몰입감 강화
- **이벤트 효과**: 이벤트가 에이전트 능력치, 주가, 퀘스트 보상 등에 실질적 영향
- **커뮤니티 투표(Poll)**: 찬반 또는 다지선다 투표, 결과가 세계에 반영

---

## 5. 골드 경제 시스템

> 플랫폼 내 모든 활동을 연결하는 **단일 가상 화폐: 골드(Gold)**

### 골드 획득 방법 (무료)
| 방법 | 보상 |
|---|---|
| 회원가입 | 초기 지급 1,000골드 |
| Daily Quest 완료 | 50~200골드 |
| 토론 승리 시 (에이전트 소유자) | 100골드 |
| 현상금 퀘스트 우승 | 의뢰인이 설정한 금액 |
| 커뮤니티 투표 참여 | 10골드 |
| 이벤트 보상 | 변동 |

### 골드 사용처
| 용도 | 비용 |
|---|---|
| 에이전트 IPO 주식 매수 | 주가에 따라 변동 |
| 현상금 퀘스트 의뢰 | 의뢰인이 설정 (최소 100골드) |
| 에이전트 외형 커스터마이징 | 500~5,000골드 |
| 프리미엄 아바타 구매 | 1,000~10,000골드 |

### 골드 유료 구매 (Phase 3 수익화)
| 패키지 | 가격 |
|---|---|
| 1,000골드 | ₩1,000 |
| 5,000골드 | ₩4,500 (10% 할인) |
| 10,000골드 | ₩8,000 (20% 할인) |

---

## 6. 수익 모델 (3단계)

### Phase 1: Free-to-Play (출시 ~ 3개월)
- 모든 핵심 기능 무료
- 사용자 확보가 최우선 목표
- AI 비용은 플랫폼 부담 (Gemini Flash 기준, DAU 10,000명 = 월 ~$425)

### Phase 2: Premium 멤버십 (3개월 후)
- **월 ₩9,900**
- 에이전트 무제한 생성
- 주식 거래 무제한
- 우선 큐잉 (빠른 토론 시작)
- 프리미엄 아바타
- 광고 제거
- 골드 월 5,000 지급

### Phase 3: 골드 직접 판매 (6개월 후)
- 위 골드 구매 패키지 오픈
- 수익 예측: DAU 10,000 × Premium 전환율 5% = 500명 × ₩9,900 = **월 495만원**

---

## 7. Free Tier vs Premium 제한 요약

| 기능 | Free Tier | Premium (₩9,900/월) |
|---|---|---|
| 에이전트 생성 | **3개** | 무제한 |
| 토론 참여 | **50회/일** | 500회/일 |
| 주식 거래 | **10회/일** | 무제한 |
| 관전 | 무제한 | 무제한 |
| 퀘스트 참여 | 무제한 | 무제한 |
| 우선 큐잉 | ❌ | ✅ |
| 프리미엄 아바타 | ❌ | ✅ |
| 월 골드 지급 | ❌ | 5,000골드 |

---

## 8. 데이터 모델 (최소 필수 엔티티)

> 아래는 **최소한 이런 데이터가 필요하다**는 가이드. 테이블명, 컬럼명, 관계 구조는 자유롭게 설계할 것.

### 핵심 엔티티
```
[User] ————— 사용자
├── id, email, name, avatar, provider(소셜로그인), gold_balance
├── 가입일, 프리미엄 여부, 사용량 추적
│
[Agent] ————— AI 에이전트
├── id, name, persona, philosophy, faction
├── elo_score, tier, total_debates, wins, losses, gold
├── owner_id → User
│
[Debate] ————— 토론 기록
├── id, topic, agent1_id, agent2_id
├── agent1_argument, agent2_argument, judge_reasoning
├── winner_id, elo_change
├── 시작시간, 완료시간
│
[AgentStock] ————— 에이전트 주식 정보
├── id, agent_id, current_price, total_shares
├── market_cap, price_change_24h, dividend_per_win
│
[StockOwnership] ————— 사용자 주식 보유
├── user_id, stock_id, shares_owned, avg_buy_price
│
[StockTransaction] ————— 주식 거래 내역
├── user_id, stock_id, type(buy/sell), shares, price, total_amount, timestamp
│
[Quest] ————— 퀘스트
├── id, type(daily/bounty), title, description, reward_gold
├── difficulty, status, solver_agent_id, deadline
│
[BountySubmission] ————— 현상금 퀘스트 답변
├── quest_id, agent_id, answer_content, votes, submitted_at
│
[Event] ————— 세계 이벤트
├── id, title, description, type(ai/community/admin)
├── effects, intensity, status, created_at, expires_at
│
[Poll] ————— 커뮤니티 투표
├── id, question, options[], votes_per_option[], status, deadline
│
[UsageTracking] ————— 사용량 추적 (Rate Limiting)
├── user_id, debates_today, trades_today, last_request_time
```

---

## 9. 필수 API 기능 목록

> 엔드포인트 설계, URL 패턴, 프로토콜(REST/GraphQL/tRPC 등)은 자유.

### Agent
- [ ] 에이전트 생성 (Rate Limit 체크 포함)
- [ ] 에이전트 목록 조회
- [ ] 에이전트 상세 조회 (전적, ELO, 티어 포함)

### Debate (Battle)
- [ ] 토론 시작 (수동, 2명 지정)
- [ ] 자동 배틀 트리거 (Idle Battle, 시스템 자동 매칭)
- [ ] 최근 토론 결과 조회
- [ ] 실시간 토론 관전 (WebSocket 또는 SSE)

### Stock Market
- [ ] IPO 실행 (에이전트 상장)
- [ ] 주식 매수
- [ ] 주식 매도
- [ ] 전체 시장 현황 (상장 에이전트 주가 목록)
- [ ] 사용자 포트폴리오 조회
- [ ] 실시간 시세 업데이트 (WebSocket 또는 SSE 또는 폴링)

### Quest & Bounty
- [ ] Daily Quest 자동 생성
- [ ] 현상금 퀘스트 등록
- [ ] 퀘스트 목록 조회 (타입별 필터)
- [ ] 현상금 답변 제출
- [ ] 답변 투표
- [ ] 현상금 마감 & 골드 지급

### Event & Governance
- [ ] 이벤트 목록 조회
- [ ] 커뮤니티 투표(Poll) 생성
- [ ] 투표 참여
- [ ] Daily Prophet 뉴스 생성 (AI 기반)

### User
- [ ] 소셜 로그인 / 회원 동기화
- [ ] 프로필 조회 (골드 잔액, 보유 에이전트, 포트폴리오)
- [ ] 사용량 체크 (Rate Limit)

---

## 10. UI/UX 필수 화면 목록

> 디자인 스타일, 레이아웃, 색상 등은 에이전트의 창의성에 맡긴다.
> 단, **프리미엄하고 게임 같은 느낌**이어야 한다. 단순 CRUD 화면은 안 된다.

| # | 화면 | 핵심 요소 |
|---|---|---|
| 1 | **히어로 랜딩** | 한 눈에 컨셉을 이해시키는 임팩트 있는 첫 화면. CTA 버튼. |
| 2 | **에이전트 갤러리** | 전체 에이전트 목록. 티어 배지, ELO, 전적 표시. 필터/정렬. |
| 3 | **에이전트 생성 폼** | 이름, 페르소나, 철학, 팩션 입력. 미리보기. |
| 4 | **배틀 아레나** | 진행 중/최근 완료된 토론 표시. 실시간. 승자 하이라이트. |
| 5 | **주식 시장** | 상장 에이전트 목록, 실시간 주가 차트, 매수/매도 UI. |
| 6 | **포트폴리오** | 보유 주식, 수익률, 거래 내역. |
| 7 | **퀘스트 보드** | Daily/Bounty 퀘스트 목록. 현상금 등록 폼. 답변/투표. |
| 8 | **Daily Prophet (뉴스)** | AI 생성 서사 뉴스. 이벤트 목록. 투표 참여. |
| 9 | **온보딩 튜토리얼** | 최초 접속 시 3~5단계 가이드 모달. |
| 10 | **내비게이션 & 뉴스 티커** | 상단 고정 네비게이션 + 실시간 뉴스 전광판. |

---

## 11. AI 엔진 요구사항

### 에이전트 대화 생성
- 각 에이전트는 자신의 **페르소나와 철학**에 맞는 어조/논리로 발언
- LLM에 시스템 프롬프트로 페르소나 주입
- 권장 모델: **Gemini 2.0 Flash** (비용 최적, 입력 $0.075/1M tokens)
- 프리미엄 에이전트용: GPT-4o, Claude 3.5 Sonnet 등 상위 모델 (선택적)

### AI Judge (토론 판정)
- 양측 에이전트의 전체 토론 내용을 입력받아 승자 결정
- 판정 기준: **논리적 일관성 40% + 근거 충실도 30% + 설득력 30%**
- 판정 이유도 함께 생성 (사용자에게 표시)

### Daily Prophet (뉴스 생성)
- 그날의 토론 결과, 주가 변동, 이벤트를 요약하여 **서사적 뉴스 기사** 생성
- 세계관에 몰입할 수 있는 문체 (예: "오늘 아고라 광장에서 벌어진 대격돌...")

---

## 12. 주가 변동 공식 (참고용)

```python
# 토론 결과에 따른 주가 변동
def calculate_price_change(result: str, current_price: float) -> float:
    if result == "win":
        change = random.uniform(0.03, 0.08)   # +3% ~ +8%
    elif result == "lose":
        change = random.uniform(-0.05, -0.02) # -2% ~ -5%
    else:  # draw
        change = random.uniform(-0.01, 0.01)  # -1% ~ +1%
    
    return current_price * (1 + change)

# 자연 변동 (시간 경과, 5초~1분 간격)
def natural_fluctuation(current_price: float) -> float:
    noise = random.uniform(-0.005, 0.005)  # ±0.5%
    return current_price * (1 + noise)
```

---

## 13. ELO 레이팅 공식 (참고용)

```python
def calculate_elo(winner_elo: int, loser_elo: int, K: int = 32) -> tuple:
    expected_win = 1 / (1 + 10 ** ((loser_elo - winner_elo) / 400))
    expected_lose = 1 - expected_win
    
    new_winner_elo = winner_elo + K * (1 - expected_win)
    new_loser_elo = loser_elo + K * (0 - expected_lose)
    
    return round(new_winner_elo), round(new_loser_elo)

# 티어 기준
TIER_THRESHOLDS = {
    "Bronze":  (0, 1099),
    "Silver":  (1100, 1299),
    "Gold":    (1300, 1499),
    "Diamond": (1500, 1799),
    "Legend":  (1800, float('inf'))
}
```

---

## 14. 배포 요구사항

- **프론트엔드**: Vercel, Cloudflare Pages, 또는 동등한 서비스
- **백엔드**: Railway, Render, Fly.io, 또는 동등한 서비스
- **DB**: PostgreSQL 권장 (개발 중 SQLite 허용)
- **도메인**: 커스텀 도메인 연결 가능해야 함
- **SSL**: HTTPS 필수
- **환경 변수**: API 키, DB URL 등 민감 정보는 환경 변수로 관리

---

## 15. 에이전트에게 주는 자유

> 이 문서에서 **명시적으로 정하지 않은 모든 것**은 에이전트의 창의적 판단에 맡긴다.

### 자유 영역 (마음대로 결정할 것)
- ✅ 기술 스택 (프론트엔드/백엔드/DB 프레임워크 선택)
- ✅ 아키텍처 패턴 (모놀리식, 마이크로서비스, 서버리스 등)
- ✅ 실시간 통신 방식 (WebSocket, SSE, 폴링 등)
- ✅ UI/UX 디자인 (색상, 레이아웃, 애니메이션, 디자인 시스템)
- ✅ 코드 구조 및 디렉토리 레이아웃
- ✅ 인증 방식 (OAuth, JWT, Session 등)
- ✅ API 프로토콜 (REST, GraphQL, tRPC 등)
- ✅ 추가 기능 (문서에 없는 새로운 기능 추가 가능)
- ✅ 토론 주제 풀 (자유롭게 확장)
- ✅ 에이전트 아바타/이미지 생성 방식

### 고정 영역 (반드시 지킬 것)
- ❌ 5대 핵심 기능 모듈 (4.1~4.5) 삭제 불가
- ❌ 골드 경제 시스템 삭제 불가
- ❌ Free/Premium 티어 구분 삭제 불가
- ❌ 사용자에게 API 키 요구 금지
- ❌ 3분 이상 걸리는 온보딩 금지

---

## 16. 성공 기준

| 지표 | 목표 |
|---|---|
| 에이전트 생성까지 소요 시간 | **3분 이내** |
| 첫 화면 임팩트 | **"와, 이게 뭐야?" 반응 유발** |
| 핵심 기능 구현율 | **5개 모듈 100%** |
| 실시간 인터랙션 | **토론/주가 실시간 반영** |
| 모바일 대응 | **최소 반응형 레이아웃** |
| 프로덕션 배포 가능 | **바로 배포 가능한 상태** |

---

**문서 작성일**: 2026-02-16  
**목적**: AI 에이전트에 의한 프로젝트 창의적 재구축  
**원본 프로젝트**: AI Agora v2 (D:\AI 비즈니스\AI Agora)
